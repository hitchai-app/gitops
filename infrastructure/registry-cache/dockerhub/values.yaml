# Docker Hub Pull-Through Cache
# Documentation: https://docs.docker.com/docker-hub/mirror/
#
# Purpose: Mitigates Docker Hub rate limits (100 pulls/6h anonymous, 200/6h free account)
# How it works: First pull fetches from docker.io and caches, subsequent pulls served from cache
#
# Used by:
# - DinD runners: Configured via --registry-mirror flag in runner pod template
#   See: infrastructure/arc-runners/hitchai-app/values.yaml
# - Future Kubernetes-mode runners: Would use node containerd configuration (not yet implemented)

replicaCount: 1

image:
  repository: registry
  tag: "2.8.3"
  pullPolicy: IfNotPresent

# Persistence configuration - Helm chart creates PVC
persistence:
  enabled: true
  storageClass: "ephemeral"
  size: 10Gi
  accessMode: "ReadWriteOnce"

# Enable pull-through cache mode for Docker Hub
proxy:
  enabled: true
  remoteurl: "https://registry-1.docker.io"

# Resource limits (minimal)
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 256Mi

# Service configuration (ClusterIP for internal use only)
service:
  type: ClusterIP
  port: 5000

# No external access needed
ingress:
  enabled: false
