---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: minio-setup-sa
  namespace: minio-infra
---
apiVersion: sts.min.io/v1alpha1
kind: PolicyBinding
metadata:
  name: minio-setup-binding
  namespace: minio-infra
spec:
  application:
    serviceaccount: minio-setup-sa
    namespace: minio-infra
  policies:
    - consoleAdmin
---
apiVersion: job.min.io/v1alpha1
kind: MinIOJob
metadata:
  name: create-buckets
  namespace: minio-infra
spec:
  serviceAccountName: minio-setup-sa
  tenant:
    name: infra
    namespace: minio-infra
  failureStrategy: continueOnFailure
  commands:
    - op: make-bucket
      name: create-actions-cache
      args:
        name: actions-cache
