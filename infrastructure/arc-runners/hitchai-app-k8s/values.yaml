# GitHub Actions Runner Scale Set - hitchai-app-k8s
# Simple Kubernetes runners WITHOUT Docker-in-Docker
# For jobs that don't require Docker (tests, linting, deployments, etc.)

# Required: GitHub configuration
githubConfigUrl: "https://github.com/hitchai-app"
# Reuse the same GitHub App secret as the DinD runners
githubConfigSecret: "hitchai-app-github-app"

# CRITICAL: This name must match the runs-on label in workflows
runnerScaleSetName: "hitchai-app-k8s-runners"

# Scaling - more runners since they're lighter weight
maxRunners: 12

# Runner pod template (simple - no DinD sidecar)
template:
  spec:
    containers:
    - name: runner
      image: ghcr.io/actions/actions-runner:latest
      command: ["/home/runner/run.sh"]
      # Overcommit strategy: Low requests for scheduling, high limits for bursting
      # Per-pod: 256Mi requests → 12 pods = 3Gi (fits in 10Gi quota)
      # Per-pod: 4Gi limits → quota caps total at 50Gi
      resources:
        requests:
          cpu: "250m"
          memory: "256Mi"
        limits:
          cpu: "2000m"
          memory: "4Gi"

# Explicitly link this scale set to the controller
controllerServiceAccount:
  namespace: arc-systems
  name: arc-gha-rs-controller
